# Инструкция по запуску и проверке проекта "Мастерская по ремонту"

## Быстрый старт

### 1. Активация виртуального окружения

```bash
source .venv/bin/activate
```

### 2. Проверка проекта

```bash
python manage.py check
```

Должно вывести: `System check identified no issues (0 silenced).`

### 3. Применение миграций (если еще не применены)

```bash
python manage.py migrate
```

### 4. Создание суперпользователя (для админ-панели)

```bash
python manage.py createsuperuser
```

Или используйте тестового пользователя, созданного командой `create_test_data`:
- **Логин**: `master`
- **Пароль**: `master123`

### 5. Создание тестовых данных

```bash
python manage.py create_test_data
```

Эта команда создаст:
- Статусы ремонта (Принят, В работе, Готов, Выдан)
- Типы техники (Холодильник, Стиральная машина, Микроволновка, Посудомоечная машина)
- Мастерские (2 штуки)
- Клиентов (3 штуки)
- Заказы на ремонт (4 штуки)
- Мастера (пользователь `master`)

### 6. Запуск сервера разработки

```bash
python manage.py runserver
```

Сервер запустится на `http://127.0.0.1:8000/`

## Проверка работы проекта

### Веб-интерфейс

1. **Главная страница** (список заказов):
   - Откройте: http://127.0.0.1:8000/
   - Должны отображаться заказы на ремонт

2. **Детальная страница заказа**:
   - Кликните на любой заказ
   - Должна отображаться полная информация о заказе

3. **Заказы по типу техники**:
   - Перейдите по ссылке на тип техники
   - Должны отображаться все заказы этого типа

4. **Страница "О мастерской"**:
   - http://127.0.0.1:8000/pages/about/

5. **Страница "Условия работы"**:
   - http://127.0.0.1:8000/pages/rules/

### Админ-панель

1. Откройте: http://127.0.0.1:8000/admin/
2. Войдите с учетными данными суперпользователя или `master/master123`
3. Проверьте наличие всех моделей:
   - Типы техники (ApplianceType)
   - Мастерские (Workshop)
   - Клиенты (Customer)
   - Статусы ремонта (RepairStatus)
   - Заказы на ремонт (RepairOrder)

### Проверка через командную строку

```bash
# Проверка миграций
python manage.py showmigrations

# Проверка моделей
python manage.py shell
```

В shell можно выполнить:
```python
from repair_shop.repair.models import RepairOrder, Customer, ApplianceType
print(f"Заказов: {RepairOrder.objects.count()}")
print(f"Клиентов: {Customer.objects.count()}")
print(f"Типов техники: {ApplianceType.objects.count()}")
```

## Структура URL

- `/` - главная страница (список заказов)
- `/orders/<id>/` - детальная страница заказа
- `/appliance-type/<slug>/` - заказы по типу техники
- `/workshop/<id>/` - заказы по мастерской
- `/pages/about/` - о мастерской
- `/pages/rules/` - условия работы
- `/admin/` - админ-панель

## Возможные проблемы

### Ошибка "No module named 'django'"
**Решение**: Активируйте виртуальное окружение:
```bash
source .venv/bin/activate
```

### Ошибка "No changes detected" при makemigrations
**Решение**: Укажите приложение явно:
```bash
python manage.py makemigrations repair
```

### Предупреждение о static files
Это нормально для разработки. Статические файлы находятся в `repair_shop/static/`.

## Тестирование

Запуск тестов:
```bash
pytest
```

Или с подробным выводом:
```bash
pytest -v
```

